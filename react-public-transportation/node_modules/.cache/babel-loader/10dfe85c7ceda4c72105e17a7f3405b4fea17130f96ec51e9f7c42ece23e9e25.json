{"ast":null,"code":"var _jsxFileName = \"/home/yaniv/101_coding/publicTransportation/react/public-transportation/src/components/map/RouteLayer.js\",\n  _s = $RefreshSig$();\nimport React, { useMemo } from 'react';\nimport { Polyline } from 'react-leaflet';\nimport { simplifyShape } from '../../utils/ShapeSimplifier';\n\n/**\n * Displays route polylines on the map\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst RouteLayer = ({\n  routeShape,\n  route\n}) => {\n  _s();\n  // Memoize and simplify the route shape to improve performance\n  const optimizedRouteShape = useMemo(() => {\n    if (!routeShape || !Array.isArray(routeShape) || routeShape.length < 3) {\n      return routeShape;\n    }\n    console.log(`Simplifying route shape with ${routeShape.length} points...`);\n\n    // Determine if we need to simplify (only for large routes)\n    if (routeShape.length > 300) {\n      // Stronger simplification for very large routes\n      const factor = routeShape.length > 1000 ? 0.00015 : 0.0001;\n      const simplified = simplifyShape(routeShape, factor);\n      console.log(`Simplified to ${simplified.length} points (${Math.round(simplified.length / routeShape.length * 100)}%)`);\n      return simplified;\n    }\n    return routeShape;\n  }, [routeShape]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [route && route.length > 0 && /*#__PURE__*/_jsxDEV(Polyline, {\n      positions: route,\n      pathOptions: {\n        color: 'blue',\n        weight: 4,\n        opacity: 0.8\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }, this), optimizedRouteShape && optimizedRouteShape.length > 0 && /*#__PURE__*/_jsxDEV(Polyline, {\n      positions: optimizedRouteShape,\n      pathOptions: {\n        color: 'red',\n        weight: 3,\n        opacity: 0.7,\n        dashArray: '5, 5',\n        lineCap: 'round'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(RouteLayer, \"j+GqBdxwQTvTIyGCMUvIDAnpnWU=\");\n_c = RouteLayer;\nexport default RouteLayer;\nvar _c;\n$RefreshReg$(_c, \"RouteLayer\");","map":{"version":3,"names":["React","useMemo","Polyline","simplifyShape","jsxDEV","_jsxDEV","Fragment","_Fragment","RouteLayer","routeShape","route","_s","optimizedRouteShape","Array","isArray","length","console","log","factor","simplified","Math","round","children","positions","pathOptions","color","weight","opacity","fileName","_jsxFileName","lineNumber","columnNumber","dashArray","lineCap","_c","$RefreshReg$"],"sources":["/home/yaniv/101_coding/publicTransportation/react/public-transportation/src/components/map/RouteLayer.js"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { Polyline } from 'react-leaflet';\nimport { simplifyShape } from '../../utils/ShapeSimplifier';\n\n/**\n * Displays route polylines on the map\n */\nconst RouteLayer = ({ routeShape, route }) => {\n  // Memoize and simplify the route shape to improve performance\n  const optimizedRouteShape = useMemo(() => {\n    if (!routeShape || !Array.isArray(routeShape) || routeShape.length < 3) {\n      return routeShape;\n    }\n    \n    console.log(`Simplifying route shape with ${routeShape.length} points...`);\n    \n    // Determine if we need to simplify (only for large routes)\n    if (routeShape.length > 300) {\n      // Stronger simplification for very large routes\n      const factor = routeShape.length > 1000 ? 0.00015 : 0.0001;\n      const simplified = simplifyShape(routeShape, factor);\n      console.log(`Simplified to ${simplified.length} points (${Math.round(simplified.length/routeShape.length*100)}%)`);\n      return simplified;\n    }\n    \n    return routeShape;\n  }, [routeShape]);\n\n  return (\n    <>\n      {/* Route from findRoute (blue solid line) */}\n      {route && route.length > 0 && (\n        <Polyline \n          positions={route} \n          pathOptions={{ \n            color: 'blue', \n            weight: 4, \n            opacity: 0.8 \n          }} \n        />\n      )}\n      \n      {/* Public transportation route shape (red dashed line) */}\n      {optimizedRouteShape && optimizedRouteShape.length > 0 && (\n        <Polyline \n          positions={optimizedRouteShape} \n          pathOptions={{ \n            color: 'red', \n            weight: 3, \n            opacity: 0.7,\n            dashArray: '5, 5',\n            lineCap: 'round'\n          }} \n        />\n      )}\n    </>\n  );\n};\n\nexport default RouteLayer;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,OAAO,QAAQ,OAAO;AACtC,SAASC,QAAQ,QAAQ,eAAe;AACxC,SAASC,aAAa,QAAQ,6BAA6B;;AAE3D;AACA;AACA;AAFA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAGA,MAAMC,UAAU,GAAGA,CAAC;EAAEC,UAAU;EAAEC;AAAM,CAAC,KAAK;EAAAC,EAAA;EAC5C;EACA,MAAMC,mBAAmB,GAAGX,OAAO,CAAC,MAAM;IACxC,IAAI,CAACQ,UAAU,IAAI,CAACI,KAAK,CAACC,OAAO,CAACL,UAAU,CAAC,IAAIA,UAAU,CAACM,MAAM,GAAG,CAAC,EAAE;MACtE,OAAON,UAAU;IACnB;IAEAO,OAAO,CAACC,GAAG,CAAC,gCAAgCR,UAAU,CAACM,MAAM,YAAY,CAAC;;IAE1E;IACA,IAAIN,UAAU,CAACM,MAAM,GAAG,GAAG,EAAE;MAC3B;MACA,MAAMG,MAAM,GAAGT,UAAU,CAACM,MAAM,GAAG,IAAI,GAAG,OAAO,GAAG,MAAM;MAC1D,MAAMI,UAAU,GAAGhB,aAAa,CAACM,UAAU,EAAES,MAAM,CAAC;MACpDF,OAAO,CAACC,GAAG,CAAC,iBAAiBE,UAAU,CAACJ,MAAM,YAAYK,IAAI,CAACC,KAAK,CAACF,UAAU,CAACJ,MAAM,GAACN,UAAU,CAACM,MAAM,GAAC,GAAG,CAAC,IAAI,CAAC;MAClH,OAAOI,UAAU;IACnB;IAEA,OAAOV,UAAU;EACnB,CAAC,EAAE,CAACA,UAAU,CAAC,CAAC;EAEhB,oBACEJ,OAAA,CAAAE,SAAA;IAAAe,QAAA,GAEGZ,KAAK,IAAIA,KAAK,CAACK,MAAM,GAAG,CAAC,iBACxBV,OAAA,CAACH,QAAQ;MACPqB,SAAS,EAAEb,KAAM;MACjBc,WAAW,EAAE;QACXC,KAAK,EAAE,MAAM;QACbC,MAAM,EAAE,CAAC;QACTC,OAAO,EAAE;MACX;IAAE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACF,EAGAnB,mBAAmB,IAAIA,mBAAmB,CAACG,MAAM,GAAG,CAAC,iBACpDV,OAAA,CAACH,QAAQ;MACPqB,SAAS,EAAEX,mBAAoB;MAC/BY,WAAW,EAAE;QACXC,KAAK,EAAE,KAAK;QACZC,MAAM,EAAE,CAAC;QACTC,OAAO,EAAE,GAAG;QACZK,SAAS,EAAE,MAAM;QACjBC,OAAO,EAAE;MACX;IAAE;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACF;EAAA,eACD,CAAC;AAEP,CAAC;AAACpB,EAAA,CAlDIH,UAAU;AAAA0B,EAAA,GAAV1B,UAAU;AAoDhB,eAAeA,UAAU;AAAC,IAAA0B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}