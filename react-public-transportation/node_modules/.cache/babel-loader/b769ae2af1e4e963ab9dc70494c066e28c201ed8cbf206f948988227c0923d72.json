{"ast":null,"code":"var _jsxFileName = \"/home/yaniv/101_coding/publicTransportation/react/public-transportation/src/MapView.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useMemo } from 'react';\nimport './App.css';\nimport { MapContainer, TileLayer } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { TrackMapMovement, UpdateMapView, fetchAddress } from './components/map/MapUtilities';\nimport { configureDefaultLeafletIcons } from './components/map/MapMarkers';\nimport MapControls from './components/map/MapControls';\nimport useMapHandlers from './hooks/useMapHandlers';\nimport MapEffect from './components/map/MapEffect';\nimport RouteLayer from './components/map/RouteLayer';\nimport MarkersLayer from './components/map/MarkersLayer';\nimport MapControlPanel from './components/map/MapControlPanel';\n\n// Configure default Leaflet icons\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconfigureDefaultLeafletIcons();\nfunction MapView({\n  latitude,\n  longitude,\n  destination,\n  onDestinationSet,\n  startingPoint,\n  mapCenter: initialMapCenter,\n  setMapCenter,\n  vehicleMarkers = [],\n  routeShape = null,\n  stops = [],\n  selectedStop = null,\n  center,\n  defaultStartingPoint,\n  defaultDestination,\n  calculateRoute,\n  onRouteCalculated\n}) {\n  _s();\n  // Use default starting point if provided\n  const [position, setPosition] = useState(defaultStartingPoint || [latitude, longitude]);\n  const [route, setRoute] = useState(null);\n  const [mapReady, setMapReady] = useState(false);\n  const [mapCenter, setMapCenterLocal] = useState(center || initialMapCenter || [latitude, longitude]);\n  const [showRoutePanel, setShowRoutePanel] = useState(false);\n  // Add state for middle point\n  const [middlePoint, setMiddlePoint] = useState(null);\n\n  // Update external map center when local state changes\n  useEffect(() => {\n    if (setMapCenter) {\n      setMapCenter(mapCenter);\n    }\n  }, [mapCenter, setMapCenter]);\n\n  // Set the default destination if provided and no destination is set\n  useEffect(() => {\n    if (defaultDestination && (!destination || !destination[0])) {\n      onDestinationSet(defaultDestination);\n    }\n  }, [defaultDestination, destination, onDestinationSet]);\n\n  // Use custom hook for map handlers\n  const {\n    searchQuery,\n    setSearchQuery,\n    searchError,\n    setSearchError,\n    // Add this line to extract setSearchError from the hook\n    positionAddress,\n    destinationAddress,\n    setPositionAddress,\n    setDestinationAddress,\n    handleSearch,\n    handleSetStartPoint,\n    handleSetDestinationPoint,\n    handleKeyPress,\n    handleFindRoute\n  } = useMapHandlers(position, setPosition, destination, onDestinationSet, setMapCenterLocal, mapCenter);\n\n  // When destination changes, ensure it's properly set\n  useEffect(() => {\n    if (destination && Array.isArray(destination) && destination.length === 2) {\n      // Destination is valid\n      fetchAddress(destination[0], destination[1], setDestinationAddress);\n    }\n  }, [destination]);\n\n  // When position changes\n  useEffect(() => {\n    if (position && Array.isArray(position) && position.length === 2) {\n      fetchAddress(position[0], position[1], setPositionAddress);\n    }\n  }, [position]);\n\n  // Add effect to respond to calculateRoute changes\n  useEffect(() => {\n    if (calculateRoute && position && destination) {\n      // Actually calculate the route using the position as starting point\n      handleFindRouteClick();\n\n      // Let parent know we've processed the request\n      if (onRouteCalculated) {\n        onRouteCalculated();\n      }\n    }\n  }, [calculateRoute, position, destination]);\n\n  // Log routeShape when it changes to debug\n  useEffect(() => {\n    if (routeShape) {\n      console.log(\"Route shape received in MapView:\", routeShape.length, \"points\");\n    }\n  }, [routeShape]);\n\n  // If we have a proper route shape, show the route panel with RouteMapView\n  const handleShowRoutePanel = () => {\n    if (routeShape && routeShape.length > 0) {\n      setShowRoutePanel(true);\n    }\n  };\n\n  // Handle clicking the \"Find Route\" button\n  const handleFindRouteClick = async () => {\n    if (destination) {\n      // Make sure we're using the current user position, not map center\n      console.log(\"Finding route from user position to destination\");\n      const routeData = await handleFindRoute();\n      if (routeData) {\n        setRoute(routeData);\n        console.log(\"Setting route with\", routeData.length, \"points from\", position, \"to\", destination);\n      }\n    } else {\n      console.error(\"No destination set\");\n    }\n  };\n\n  // Function to calculate and set the middle point of line 60's route\n  const handleShowMiddlePoint = async () => {\n    try {\n      // Check first if we already have the line 60 route shape\n      if (routeShape && routeShape.length > 0) {\n        // We already have the line 60 route loaded\n        setMiddlePointForRoute(routeShape);\n      } else {\n        // We need to fetch the line 60 route data\n        setSearchError('Fetching Line 60 route data...');\n        try {\n          const response = await fetch('/simple-shape-api.php?line=60');\n          const data = await response.json();\n          if (!data || !data['0'] && !data['1']) {\n            setSearchError('Could not fetch Line 60 route data');\n            setTimeout(() => setSearchError(null), 3000);\n            return;\n          }\n\n          // Use the first direction available\n          const shape = data['0'] || data['1'];\n          if (shape && shape.length > 0) {\n            console.log(`Got Line 60 shape with ${shape.length} points`);\n            setMiddlePointForRoute(shape);\n          } else {\n            setSearchError('Line 60 route data has no points');\n            setTimeout(() => setSearchError(null), 3000);\n          }\n        } catch (error) {\n          console.error('Error fetching Line 60 shape:', error);\n          setSearchError('Error fetching Line 60 data');\n          setTimeout(() => setSearchError(null), 3000);\n        }\n      }\n    } catch (error) {\n      console.error('Error in handleShowMiddlePoint:', error);\n      setSearchError('An error occurred finding the middle point');\n      setTimeout(() => setSearchError(null), 3000);\n    }\n  };\n\n  // Helper function to calculate and set middle point from route\n  const setMiddlePointForRoute = routePoints => {\n    // Calculate the middle point\n    const middleIndex = Math.floor(routePoints.length / 2);\n    let calculatedMiddlePoint;\n    if (routePoints.length % 2 === 1) {\n      // Odd number of points - take the middle one\n      calculatedMiddlePoint = routePoints[middleIndex];\n    } else {\n      // Even number of points - average the two middle points\n      const midPoint1 = routePoints[middleIndex - 1];\n      const midPoint2 = routePoints[middleIndex];\n      calculatedMiddlePoint = [(midPoint1[0] + midPoint2[0]) / 2, (midPoint1[1] + midPoint2[1]) / 2];\n    }\n\n    // Set the middle point and log to console\n    setMiddlePoint(calculatedMiddlePoint);\n    console.log(\"Line 60 middle point:\", calculatedMiddlePoint);\n  };\n\n  // Memoize optimized route shape to avoid unnecessary recalculations\n  const optimizedRouteShape = useMemo(() => {\n    return routeShape;\n  }, [routeShape]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: '100vh',\n      width: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(MapControls, {\n      searchQuery: searchQuery,\n      setSearchQuery: setSearchQuery,\n      handleSearch: handleSearch,\n      handleKeyPress: handleKeyPress,\n      handleSetStartPoint: handleSetStartPoint,\n      handleSetDestinationPoint: handleSetDestinationPoint,\n      searchError: searchError,\n      positionAddress: positionAddress,\n      destinationAddress: destinationAddress\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleShowMiddlePoint,\n      style: {\n        position: 'absolute',\n        bottom: '60px',\n        left: '10px',\n        zIndex: 1000,\n        padding: '8px 12px',\n        backgroundColor: '#9c27b0',\n        color: 'white',\n        border: 'none',\n        borderRadius: '4px',\n        cursor: 'pointer'\n      },\n      title: \"Show middle point of Line 60 route\",\n      children: \"Show Line 60 Middle Point\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapControlPanel, {\n      showRoutePanel: showRoutePanel,\n      setShowRoutePanel: setShowRoutePanel,\n      optimizedRouteShape: optimizedRouteShape,\n      handleShowRoutePanel: handleShowRoutePanel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: mapCenter,\n      zoom: 13,\n      style: {\n        height: '100%',\n        width: '100%'\n      },\n      zoomControl: false,\n      whenReady: () => setMapReady(true),\n      preferCanvas: true,\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(UpdateMapView, {\n        position: mapCenter\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TrackMapMovement, {\n        setMapCenter: setMapCenterLocal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MapEffect, {\n        routeShape: optimizedRouteShape\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RouteLayer, {\n        routeShape: routeShape,\n        route: route\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MarkersLayer, {\n        position: position,\n        positionAddress: positionAddress,\n        destination: destination,\n        destinationAddress: destinationAddress,\n        mapCenter: mapCenter,\n        vehicleMarkers: vehicleMarkers,\n        stops: stops,\n        selectedStop: selectedStop,\n        handleSetStartPoint: handleSetStartPoint,\n        middlePoint: middlePoint // Pass the middle point to MarkersLayer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 5\n  }, this);\n}\n_s(MapView, \"ZGFlxIddd9G91l9/B7yPpEBDmvc=\", false, function () {\n  return [useMapHandlers];\n});\n_c = MapView;\nexport default MapView;\nvar _c;\n$RefreshReg$(_c, \"MapView\");","map":{"version":3,"names":["useEffect","useState","useMemo","MapContainer","TileLayer","TrackMapMovement","UpdateMapView","fetchAddress","configureDefaultLeafletIcons","MapControls","useMapHandlers","MapEffect","RouteLayer","MarkersLayer","MapControlPanel","jsxDEV","_jsxDEV","MapView","latitude","longitude","destination","onDestinationSet","startingPoint","mapCenter","initialMapCenter","setMapCenter","vehicleMarkers","routeShape","stops","selectedStop","center","defaultStartingPoint","defaultDestination","calculateRoute","onRouteCalculated","_s","position","setPosition","route","setRoute","mapReady","setMapReady","setMapCenterLocal","showRoutePanel","setShowRoutePanel","middlePoint","setMiddlePoint","searchQuery","setSearchQuery","searchError","setSearchError","positionAddress","destinationAddress","setPositionAddress","setDestinationAddress","handleSearch","handleSetStartPoint","handleSetDestinationPoint","handleKeyPress","handleFindRoute","Array","isArray","length","handleFindRouteClick","console","log","handleShowRoutePanel","routeData","error","handleShowMiddlePoint","setMiddlePointForRoute","response","fetch","data","json","setTimeout","shape","routePoints","middleIndex","Math","floor","calculatedMiddlePoint","midPoint1","midPoint2","optimizedRouteShape","style","height","width","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","bottom","left","zIndex","padding","backgroundColor","color","border","borderRadius","cursor","title","zoom","zoomControl","whenReady","preferCanvas","url","attribution","_c","$RefreshReg$"],"sources":["/home/yaniv/101_coding/publicTransportation/react/public-transportation/src/MapView.js"],"sourcesContent":["import { useEffect, useState, useMemo } from 'react';\nimport './App.css';\nimport { MapContainer, TileLayer } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { TrackMapMovement, UpdateMapView, fetchAddress } from './components/map/MapUtilities';\nimport { configureDefaultLeafletIcons } from './components/map/MapMarkers';\nimport MapControls from './components/map/MapControls';\nimport useMapHandlers from './hooks/useMapHandlers';\nimport MapEffect from './components/map/MapEffect';\nimport RouteLayer from './components/map/RouteLayer';\nimport MarkersLayer from './components/map/MarkersLayer';\nimport MapControlPanel from './components/map/MapControlPanel';\n\n// Configure default Leaflet icons\nconfigureDefaultLeafletIcons();\n\nfunction MapView({ \n  latitude, \n  longitude, \n  destination, \n  onDestinationSet, \n  startingPoint,\n  mapCenter: initialMapCenter,\n  setMapCenter,\n  vehicleMarkers = [],\n  routeShape = null,\n  stops = [],\n  selectedStop = null,\n  center,\n  defaultStartingPoint,\n  defaultDestination,\n  calculateRoute,\n  onRouteCalculated\n}) {\n  // Use default starting point if provided\n  const [position, setPosition] = useState(defaultStartingPoint || [latitude, longitude]);\n  const [route, setRoute] = useState(null);\n  const [mapReady, setMapReady] = useState(false);\n  const [mapCenter, setMapCenterLocal] = useState(center || initialMapCenter || [latitude, longitude]);\n  const [showRoutePanel, setShowRoutePanel] = useState(false);\n  // Add state for middle point\n  const [middlePoint, setMiddlePoint] = useState(null);\n\n  // Update external map center when local state changes\n  useEffect(() => {\n    if (setMapCenter) {\n      setMapCenter(mapCenter);\n    }\n  }, [mapCenter, setMapCenter]);\n\n  // Set the default destination if provided and no destination is set\n  useEffect(() => {\n    if (defaultDestination && (!destination || !destination[0])) {\n      onDestinationSet(defaultDestination);\n    }\n  }, [defaultDestination, destination, onDestinationSet]);\n\n  // Use custom hook for map handlers\n  const {\n    searchQuery,\n    setSearchQuery,\n    searchError,\n    setSearchError,  // Add this line to extract setSearchError from the hook\n    positionAddress,\n    destinationAddress,\n    setPositionAddress,\n    setDestinationAddress,\n    handleSearch,\n    handleSetStartPoint,\n    handleSetDestinationPoint,\n    handleKeyPress,\n    handleFindRoute\n  } = useMapHandlers(position, setPosition, destination, onDestinationSet, setMapCenterLocal, mapCenter);\n\n  // When destination changes, ensure it's properly set\n  useEffect(() => {\n    if (destination && Array.isArray(destination) && destination.length === 2) {\n      // Destination is valid\n      fetchAddress(destination[0], destination[1], setDestinationAddress);\n    }\n  }, [destination]);\n\n  // When position changes\n  useEffect(() => {\n    if (position && Array.isArray(position) && position.length === 2) {\n      fetchAddress(position[0], position[1], setPositionAddress);\n    }\n  }, [position]);\n\n  // Add effect to respond to calculateRoute changes\n  useEffect(() => {\n    if (calculateRoute && position && destination) {\n      // Actually calculate the route using the position as starting point\n      handleFindRouteClick();\n      \n      // Let parent know we've processed the request\n      if (onRouteCalculated) {\n        onRouteCalculated();\n      }\n    }\n  }, [calculateRoute, position, destination]);\n\n  // Log routeShape when it changes to debug\n  useEffect(() => {\n    if (routeShape) {\n      console.log(\"Route shape received in MapView:\", routeShape.length, \"points\");\n    }\n  }, [routeShape]);\n\n  // If we have a proper route shape, show the route panel with RouteMapView\n  const handleShowRoutePanel = () => {\n    if (routeShape && routeShape.length > 0) {\n      setShowRoutePanel(true);\n    }\n  };\n\n  // Handle clicking the \"Find Route\" button\n  const handleFindRouteClick = async () => {\n    if (destination) {\n      // Make sure we're using the current user position, not map center\n      console.log(\"Finding route from user position to destination\");\n      const routeData = await handleFindRoute();\n      if (routeData) {\n        setRoute(routeData);\n        console.log(\"Setting route with\", routeData.length, \"points from\", position, \"to\", destination);\n      }\n    } else {\n      console.error(\"No destination set\");\n    }\n  };\n\n  // Function to calculate and set the middle point of line 60's route\n  const handleShowMiddlePoint = async () => {\n    try {\n      // Check first if we already have the line 60 route shape\n      if (routeShape && routeShape.length > 0) {\n        // We already have the line 60 route loaded\n        setMiddlePointForRoute(routeShape);\n      } else {\n        // We need to fetch the line 60 route data\n        setSearchError('Fetching Line 60 route data...');\n        \n        try {\n          const response = await fetch('/simple-shape-api.php?line=60');\n          const data = await response.json();\n          \n          if (!data || (!data['0'] && !data['1'])) {\n            setSearchError('Could not fetch Line 60 route data');\n            setTimeout(() => setSearchError(null), 3000);\n            return;\n          }\n          \n          // Use the first direction available\n          const shape = data['0'] || data['1'];\n          if (shape && shape.length > 0) {\n            console.log(`Got Line 60 shape with ${shape.length} points`);\n            setMiddlePointForRoute(shape);\n          } else {\n            setSearchError('Line 60 route data has no points');\n            setTimeout(() => setSearchError(null), 3000);\n          }\n        } catch (error) {\n          console.error('Error fetching Line 60 shape:', error);\n          setSearchError('Error fetching Line 60 data');\n          setTimeout(() => setSearchError(null), 3000);\n        }\n      }\n    } catch (error) {\n      console.error('Error in handleShowMiddlePoint:', error);\n      setSearchError('An error occurred finding the middle point');\n      setTimeout(() => setSearchError(null), 3000);\n    }\n  };\n\n  // Helper function to calculate and set middle point from route\n  const setMiddlePointForRoute = (routePoints) => {\n    // Calculate the middle point\n    const middleIndex = Math.floor(routePoints.length / 2);\n    let calculatedMiddlePoint;\n    \n    if (routePoints.length % 2 === 1) {\n      // Odd number of points - take the middle one\n      calculatedMiddlePoint = routePoints[middleIndex];\n    } else {\n      // Even number of points - average the two middle points\n      const midPoint1 = routePoints[middleIndex - 1];\n      const midPoint2 = routePoints[middleIndex];\n      calculatedMiddlePoint = [\n        (midPoint1[0] + midPoint2[0]) / 2,\n        (midPoint1[1] + midPoint2[1]) / 2\n      ];\n    }\n    \n    // Set the middle point and log to console\n    setMiddlePoint(calculatedMiddlePoint);\n    console.log(\"Line 60 middle point:\", calculatedMiddlePoint);\n  };\n\n  // Memoize optimized route shape to avoid unnecessary recalculations\n  const optimizedRouteShape = useMemo(() => {\n    return routeShape;\n  }, [routeShape]);\n\n  return (\n    <div style={{ height: '100vh', width: '100%' }}>\n      {/* Search and controls */}\n      <MapControls \n        searchQuery={searchQuery}\n        setSearchQuery={setSearchQuery}\n        handleSearch={handleSearch}\n        handleKeyPress={handleKeyPress}\n        handleSetStartPoint={handleSetStartPoint}\n        handleSetDestinationPoint={handleSetDestinationPoint}\n        searchError={searchError}\n        positionAddress={positionAddress}\n        destinationAddress={destinationAddress}\n      />\n      \n      {/* Middle point button for line 60 */}\n      <button\n        onClick={handleShowMiddlePoint}\n        style={{\n          position: 'absolute',\n          bottom: '60px',\n          left: '10px',\n          zIndex: 1000,\n          padding: '8px 12px',\n          backgroundColor: '#9c27b0',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: 'pointer'\n        }}\n        title=\"Show middle point of Line 60 route\"\n      >\n        Show Line 60 Middle Point\n      </button>\n      \n      {/* Route panel and controls */}\n      <MapControlPanel\n        showRoutePanel={showRoutePanel}\n        setShowRoutePanel={setShowRoutePanel}\n        optimizedRouteShape={optimizedRouteShape}\n        handleShowRoutePanel={handleShowRoutePanel}\n      />\n      \n      <MapContainer \n        center={mapCenter} \n        zoom={13} \n        style={{ height: '100%', width: '100%' }} \n        zoomControl={false}\n        whenReady={() => setMapReady(true)}\n        preferCanvas={true}\n      >\n        <TileLayer\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        />\n        <UpdateMapView position={mapCenter} />\n        <TrackMapMovement setMapCenter={setMapCenterLocal} />\n        <MapEffect routeShape={optimizedRouteShape} />\n        \n        {/* All route polylines */}\n        <RouteLayer \n          routeShape={routeShape}\n          route={route}\n        />\n        \n        {/* All map markers */}\n        <MarkersLayer\n          position={position}\n          positionAddress={positionAddress}\n          destination={destination}\n          destinationAddress={destinationAddress}\n          mapCenter={mapCenter}\n          vehicleMarkers={vehicleMarkers}\n          stops={stops}\n          selectedStop={selectedStop}\n          handleSetStartPoint={handleSetStartPoint}\n          middlePoint={middlePoint}  // Pass the middle point to MarkersLayer\n        />\n      </MapContainer>\n    </div>\n  );\n}\n\nexport default MapView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}